\hypertarget{classTF__TestCnt}{
\section{TF\_\-TestCnt Class Reference}
\label{classTF__TestCnt}\index{TF\_\-TestCnt@{TF\_\-TestCnt}}
}


Checking the transmission counter at CUDA device.  


{\ttfamily \#include $<$tf\_\-testcnt.h$>$}Inheritance diagram for TF\_\-TestCnt::\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=3cm]{classTF__TestCnt}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classTF__TestCnt_a383dec3bead32626029801edceb9e73d}{TF\_\-TestCnt} (int argc, char $\ast$$\ast$argv)
\item 
virtual \hyperlink{classTF__TestCnt_a05aac39696c9db049193b3a49a389521}{$\sim$TF\_\-TestCnt} ()
\item 
virtual void \hyperlink{classTF__TestCnt_ac1a136199115958172e96ef4c9212351}{StepTable} (void)
\begin{DoxyCompactList}\small\item\em Display current information about cheking buffers. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{classTF__TestCnt_a294a67b58d75600172433b8fae006a3e}{PrepareInThread} (void)
\begin{DoxyCompactList}\small\item\em Prepare CUDA and buffers. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{classTF__TestCnt_a95c7a76a1fe574d1ed260a07f9469501}{CleanupInThread} (void)
\begin{DoxyCompactList}\small\item\em Free buffers and close device. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{classTF__TestCnt_aa7b667d47ddc70942ff2ff73074c7696}{Run} (void)
\begin{DoxyCompactList}\small\item\em Main working cycle. \item\end{DoxyCompactList}\item 
virtual void \hyperlink{classTF__TestCnt_af1d8c610c3b708401c19ad8256db27be}{GetResult} (void)
\begin{DoxyCompactList}\small\item\em Display result for all buffers. \item\end{DoxyCompactList}\item 
void \hyperlink{classTF__TestCnt_adda7871a49f18d707228c85d7169c1df}{FillCounter} (\hyperlink{structCL__Cuda_1_1BAR1__BUF}{CL\_\-Cuda::BAR1\_\-BUF} $\ast$pBar1)
\begin{DoxyCompactList}\small\item\em Fill buffer in Cuda memory via BAR1. \item\end{DoxyCompactList}\item 
void \hyperlink{classTF__TestCnt_a865cbf57a7dcbf45e6ed2a29aac1526c}{GetResultBuffer} (int nbuf)
\begin{DoxyCompactList}\small\item\em Print results for buffer. \item\end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{classTF__TestCnt_ae5c1457ee61a41a35a721fcd064892cb}{m\_\-argc}
\begin{DoxyCompactList}\small\item\em Number of arguments. \item\end{DoxyCompactList}\item 
char $\ast$$\ast$ \hyperlink{classTF__TestCnt_a488e38fc6a844dbbf7ec8304717524ef}{m\_\-argv}
\begin{DoxyCompactList}\small\item\em Pointers to arguments. \item\end{DoxyCompactList}\item 
int \hyperlink{classTF__TestCnt_acbae8197757e11371fde750b576e06cc}{m\_\-SizeBufferOfKb}
\begin{DoxyCompactList}\small\item\em Size buffer \mbox{[}kbytes\mbox{]}. Must be n$\ast$64. \item\end{DoxyCompactList}\item 
int \hyperlink{classTF__TestCnt_a70e774fb6d9ae7612e09435db2c181bf}{m\_\-CountOfCycle}
\begin{DoxyCompactList}\small\item\em Number of cycle. 0 -\/ infinitely. \item\end{DoxyCompactList}\item 
struct \hyperlink{structTaskData}{TaskData} $\ast$ \hyperlink{classTF__TestCnt_ad07a631fa0915ea387e2877bf06ef7b2}{td}
\begin{DoxyCompactList}\small\item\em Local data for test. \item\end{DoxyCompactList}\item 
\hyperlink{classCL__Cuda}{CL\_\-Cuda} $\ast$ \hyperlink{classTF__TestCnt_ae3ae3864214526738718e0c7c81e915f}{m\_\-pCuda}
\begin{DoxyCompactList}\small\item\em Cuda device. \item\end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Checking the transmission counter at CUDA device. Key actions:
\begin{DoxyEnumerate}
\item Open CUDA device
\item Open gpumem driver
\item Allocate three buffers in the CUDA memory
\item Mapping buffers in the BAR1 space on CUDA device
\item Filling the buffer 64-\/bit counter via BAR1
\item Checking buffer in the CUDA device
\item Decimation buffer and transfer to the HOST
\item Transfer result of checking to HOST
\end{DoxyEnumerate}

Steps 5-\/8 are carried out in a loop 

Definition at line 40 of file tf\_\-testcnt.h.

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classTF__TestCnt_a383dec3bead32626029801edceb9e73d}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!TF\_\-TestCnt@{TF\_\-TestCnt}}
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{TF\_\-TestCnt}]{\setlength{\rightskip}{0pt plus 5cm}TF\_\-TestCnt::TF\_\-TestCnt (int {\em argc}, \/  char $\ast$$\ast$ {\em argv})}}
\label{classTF__TestCnt_a383dec3bead32626029801edceb9e73d}


Definition at line 25 of file tf\_\-testcnt.cpp.\hypertarget{classTF__TestCnt_a05aac39696c9db049193b3a49a389521}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!$\sim$TF\_\-TestCnt@{$\sim$TF\_\-TestCnt}}
\index{$\sim$TF\_\-TestCnt@{$\sim$TF\_\-TestCnt}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{$\sim$TF\_\-TestCnt}]{\setlength{\rightskip}{0pt plus 5cm}TF\_\-TestCnt::$\sim$TF\_\-TestCnt ()\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTF__TestCnt_a05aac39696c9db049193b3a49a389521}


Definition at line 44 of file tf\_\-testcnt.cpp.

\subsection{Member Function Documentation}
\hypertarget{classTF__TestCnt_a95c7a76a1fe574d1ed260a07f9469501}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!CleanupInThread@{CleanupInThread}}
\index{CleanupInThread@{CleanupInThread}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{CleanupInThread}]{\setlength{\rightskip}{0pt plus 5cm}void TF\_\-TestCnt::CleanupInThread (void)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTF__TestCnt_a95c7a76a1fe574d1ed260a07f9469501}


Free buffers and close device. 

Reimplemented from \hyperlink{classTF__TestThread_a36cfb1a6da55b938b5634ac86adbae2f}{TF\_\-TestThread}.

Definition at line 141 of file tf\_\-testcnt.cpp.\hypertarget{classTF__TestCnt_adda7871a49f18d707228c85d7169c1df}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!FillCounter@{FillCounter}}
\index{FillCounter@{FillCounter}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{FillCounter}]{\setlength{\rightskip}{0pt plus 5cm}void TF\_\-TestCnt::FillCounter ({\bf CL\_\-Cuda::BAR1\_\-BUF} $\ast$ {\em pBar1})}}
\label{classTF__TestCnt_adda7871a49f18d707228c85d7169c1df}


Fill buffer in Cuda memory via BAR1. fill buffer


\begin{DoxyParams}{Parameters}
\item[{\em pBar1}]description of buffer\end{DoxyParams}
function fill bar1 buffer via pBar1-\/$>$app\_\-addr\mbox{[}\mbox{]} 

Definition at line 163 of file tf\_\-testcnt.cpp.\hypertarget{classTF__TestCnt_af1d8c610c3b708401c19ad8256db27be}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!GetResult@{GetResult}}
\index{GetResult@{GetResult}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{GetResult}]{\setlength{\rightskip}{0pt plus 5cm}void TF\_\-TestCnt::GetResult (void)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTF__TestCnt_af1d8c610c3b708401c19ad8256db27be}


Display result for all buffers. 

Reimplemented from \hyperlink{classTF__Test_a3e4bb4453e490c2a897ccc86b6e788bf}{TF\_\-Test}.

Definition at line 287 of file tf\_\-testcnt.cpp.\hypertarget{classTF__TestCnt_a865cbf57a7dcbf45e6ed2a29aac1526c}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!GetResultBuffer@{GetResultBuffer}}
\index{GetResultBuffer@{GetResultBuffer}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{GetResultBuffer}]{\setlength{\rightskip}{0pt plus 5cm}void TF\_\-TestCnt::GetResultBuffer (int {\em nbuf})}}
\label{classTF__TestCnt_a865cbf57a7dcbf45e6ed2a29aac1526c}


Print results for buffer. Display result for one buffers.


\begin{DoxyParams}{Parameters}
\item[{\em nbuf}]number of buffer \end{DoxyParams}


Definition at line 301 of file tf\_\-testcnt.cpp.\hypertarget{classTF__TestCnt_a294a67b58d75600172433b8fae006a3e}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!PrepareInThread@{PrepareInThread}}
\index{PrepareInThread@{PrepareInThread}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{PrepareInThread}]{\setlength{\rightskip}{0pt plus 5cm}void TF\_\-TestCnt::PrepareInThread (void)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTF__TestCnt_a294a67b58d75600172433b8fae006a3e}


Prepare CUDA and buffers. Open CUDA device Allocate three buffers and buffer for monitor 

Reimplemented from \hyperlink{classTF__TestThread_aebd5daf255a209019d018bc363021433}{TF\_\-TestThread}.

Definition at line 85 of file tf\_\-testcnt.cpp.\hypertarget{classTF__TestCnt_aa7b667d47ddc70942ff2ff73074c7696}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!Run@{Run}}
\index{Run@{Run}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{Run}]{\setlength{\rightskip}{0pt plus 5cm}void TF\_\-TestCnt::Run (void)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTF__TestCnt_aa7b667d47ddc70942ff2ff73074c7696}


Main working cycle. It is main working cycle. Function FillCounter simulate to work external DMA channel. 

Reimplemented from \hyperlink{classTF__TestThread_ab581c9fb725595dff5ffc400a96886a0}{TF\_\-TestThread}.

Definition at line 193 of file tf\_\-testcnt.cpp.\hypertarget{classTF__TestCnt_ac1a136199115958172e96ef4c9212351}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!StepTable@{StepTable}}
\index{StepTable@{StepTable}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{StepTable}]{\setlength{\rightskip}{0pt plus 5cm}void TF\_\-TestCnt::StepTable (void)\hspace{0.3cm}{\ttfamily  \mbox{[}virtual\mbox{]}}}}
\label{classTF__TestCnt_ac1a136199115958172e96ef4c9212351}


Display current information about cheking buffers. Function display information if 0==m\_\-CountOfCycle function is called from main with interval of 100 ms 

Reimplemented from \hyperlink{classTF__TestThread_a25569ec704c682eed81abd63e05adf2a}{TF\_\-TestThread}.

Definition at line 57 of file tf\_\-testcnt.cpp.

\subsection{Member Data Documentation}
\hypertarget{classTF__TestCnt_ae5c1457ee61a41a35a721fcd064892cb}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!m\_\-argc@{m\_\-argc}}
\index{m\_\-argc@{m\_\-argc}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{m\_\-argc}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf TF\_\-TestCnt::m\_\-argc}}}
\label{classTF__TestCnt_ae5c1457ee61a41a35a721fcd064892cb}


Number of arguments. 

Definition at line 58 of file tf\_\-testcnt.h.\hypertarget{classTF__TestCnt_a488e38fc6a844dbbf7ec8304717524ef}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!m\_\-argv@{m\_\-argv}}
\index{m\_\-argv@{m\_\-argv}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{m\_\-argv}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$$\ast$ {\bf TF\_\-TestCnt::m\_\-argv}}}
\label{classTF__TestCnt_a488e38fc6a844dbbf7ec8304717524ef}


Pointers to arguments. 

Definition at line 61 of file tf\_\-testcnt.h.\hypertarget{classTF__TestCnt_a70e774fb6d9ae7612e09435db2c181bf}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!m\_\-CountOfCycle@{m\_\-CountOfCycle}}
\index{m\_\-CountOfCycle@{m\_\-CountOfCycle}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{m\_\-CountOfCycle}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf TF\_\-TestCnt::m\_\-CountOfCycle}}}
\label{classTF__TestCnt_a70e774fb6d9ae7612e09435db2c181bf}


Number of cycle. 0 -\/ infinitely. 

Definition at line 66 of file tf\_\-testcnt.h.\hypertarget{classTF__TestCnt_ae3ae3864214526738718e0c7c81e915f}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!m\_\-pCuda@{m\_\-pCuda}}
\index{m\_\-pCuda@{m\_\-pCuda}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{m\_\-pCuda}]{\setlength{\rightskip}{0pt plus 5cm}{\bf CL\_\-Cuda}$\ast$ {\bf TF\_\-TestCnt::m\_\-pCuda}}}
\label{classTF__TestCnt_ae3ae3864214526738718e0c7c81e915f}


Cuda device. 

Definition at line 71 of file tf\_\-testcnt.h.\hypertarget{classTF__TestCnt_acbae8197757e11371fde750b576e06cc}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!m\_\-SizeBufferOfKb@{m\_\-SizeBufferOfKb}}
\index{m\_\-SizeBufferOfKb@{m\_\-SizeBufferOfKb}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{m\_\-SizeBufferOfKb}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf TF\_\-TestCnt::m\_\-SizeBufferOfKb}}}
\label{classTF__TestCnt_acbae8197757e11371fde750b576e06cc}


Size buffer \mbox{[}kbytes\mbox{]}. Must be n$\ast$64. 

Definition at line 64 of file tf\_\-testcnt.h.\hypertarget{classTF__TestCnt_ad07a631fa0915ea387e2877bf06ef7b2}{
\index{TF\_\-TestCnt@{TF\_\-TestCnt}!td@{td}}
\index{td@{td}!TF_TestCnt@{TF\_\-TestCnt}}
\subsubsection[{td}]{\setlength{\rightskip}{0pt plus 5cm}struct {\bf TaskData}$\ast$ {\bf TF\_\-TestCnt::td}\hspace{0.3cm}{\ttfamily  \mbox{[}read\mbox{]}}}}
\label{classTF__TestCnt_ad07a631fa0915ea387e2877bf06ef7b2}


Local data for test. 

Definition at line 69 of file tf\_\-testcnt.h.

The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
host/\hyperlink{tf__testcnt_8h}{tf\_\-testcnt.h}\item 
host/\hyperlink{tf__testcnt_8cpp}{tf\_\-testcnt.cpp}\end{DoxyCompactItemize}
